#MaxPersistent: 20 # Maximum umber of actions to persist between data-products
MaxKeepOpen: 20 # Maximum number of file-descriptor-using actions to keep-open between data-products
PatternActions:
  # Append Metars the hard way
  - Include: ^SAUS(..) (....) 
    Action: PIPE
    Command: [sh, -c, cat >>data/surface/US/$2/$1]
#    Persist: true
    KeepOpen: true
#    Close: false

  # Keep only the most recent SIGMET.
  - Include: ^WS
    Action: PIPE
    Command: [sh, -c, cat >data/WWA/lastSIGMET]
    
  # APPEND example. Doesn't close output file.
  #   $1: Type of observation
  #   $2: Country
  #   $3: Day of month
  #   $4: Minute of hour
  - Include: ^(..)(..).. .... (..)(..)
  - Action: APPEND
  - Path: IDS_DDPLUS/$1/$2/($3:yyyy)($3:mm)($3:dd)T$4.txt
#  - Persist: true
  - KeepOpen: true
#  - Close: false
    
  # APPEND example. Like the above but data-agnostic. Also doesn't close output file.
  #   $1: Type of observation
  #   $2: Country
  #   $3: Day of month
  #   $4: Minute of hour
  - Include: ^(..)(..).. .... (..)(..)
  - Action: PIPE
  - Command: [ids_ddplus_decoder, IDS_DDPLUS, $1, $2, $3, $4]
  - KeepOpen: true

  # FILE example. Closes output file.
  - Include: ^(20........)/(model_center.dat)
  - Action: FILE
  - Path: data/pub/wseta/$1_$2
  